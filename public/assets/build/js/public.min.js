"use strict";function AddonifyPerfectScrollBar(o){new PerfectScrollbar(o,{wheelSpeed:1,wheelPropagation:!0,minScrollbarLength:20})}!function(D){D(document).ready(function(){var o,a=D("body"),e=[],d=D("#addonify-compare-dock-thumbnails"),n=D("#addonify-compare-dock-message"),i=D("#addonify-compare-search-modal"),c=D("#addonify-compare-search-results"),t=D("#addonify-compare-modal"),r=D("#addonify-compare-modal-content"),s=D("#addonify-compare-dock-compare-btn"),l=!1,p=!1,m=!0,f=addonify_compare_ajax_object.display_type,u=addonify_compare_ajax_object.comparision_page_url,y=D("#addonify-compare-modal-overlay"),_=D("#addonify-compare-search-modal-overlay"),h=(D("#addonify-compare-dock-thumbnails").sortable({stop:function(){e=[],d.find(".addonify-compare-dock-components").each(function(){e.push(D(this).data("product_id"))}),l=!0,B(e),p&&(A(),l=!0,L())}}).disableSelection(),D(".addonify-cp-button").click(function(o){o.preventDefault()}),"addonify-overlay-btn-wrapper"),v="addonify-overlay-btn",b=D("."+h),k=D(".addonify-overlay-buttons"),k=(b.length?k.each(function(){var o=D("button."+v,this).clone();D("button."+v,this).remove(),D("."+h,this).append(o)}):(k.each(function(){D("button."+v,this).wrapAll('<div class=" '+h+' " />')}),b=D("img.attachment-woocommerce_thumbnail").height(),D("."+h).css("height",b+"px"),D("."+h).hover(function(){D(this).css("opacity",1)},function(){D(this).css("opacity",0)})),Cookies.get("addonify_compare_product_selected_product_ids"));k&&(e=D.map(k.split(","),function(o){return parseInt(o)})),j(),e.length&&((k=b=e.join(",")).split(",").forEach(function(o){D('button.addonify-cp-button[data-product_id="'+o+'"]').addClass("selected").attr("disabled",!0)}),x(b),C(b),g());function j(){1<e.length?s.fadeIn():s.fadeOut()}function g(){e.length?a.addClass("addonify-compare-dock-is-visible"):a.removeClass("addonify-compare-dock-is-visible")}function C(o){o.length&&(o={action:addonify_compare_ajax_object.action_get_thumbnails,ids:o},D.getJSON(addonify_compare_ajax_object.ajax_url,o,function(o){D.each(o,function(o,a){D('.addonify-compare-dock-thumbnail[data-product_id="'+o+'"]').append('<img src="'+a+'">').removeClass("loading")})}))}function x(o){var o=o.split(","),a="";o.forEach(function(o){a+='<div class="addonify-compare-dock-components" data-product_id="'+o+'"><div class="sortable addonify-compare-dock-thumbnail loading" data-product_id="'+o+'"><span class="addonify-compare-dock-remove-item-btn" data-product_id="'+o+"\"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path d='M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z' /></svg></span><span class=\"addonify-loading-wave\"></span></div></div>"}),d.append(a)}function w(){e.length<2?(n.removeClass("addonify-compare-hidden"),D("#addonify-compare-dock-inner").removeClass("full")):(n.addClass("addonify-compare-hidden"),D("#addonify-compare-dock-inner").addClass("full"))}function S(){i.addClass("addonify-compare-hidden"),c.html(""),D("#addonify-compare-search-query").val("")}function L(){var o;y.removeClass("addonify-compare-hidden"),a.removeClass("addonify-compare-dock-is-visible"),l&&r.html(""),p=!0,t.removeClass("addonify-compare-hidden"),r.addClass("loading"),(o=e.join(","))&&l&&(o={action:addonify_compare_ajax_object.action_get_compare_contents},D.get(addonify_compare_ajax_object.ajax_url,o,function(o){r.removeClass("loading").html(o)}))}function A(){y.addClass("addonify-compare-hidden"),a.addClass("addonify-compare-dock-is-visible"),t.addClass("addonify-compare-hidden"),l=p=!1}function B(o){o=o.join(","),"browser"==addonify_compare_ajax_object.cookie_expire?Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain}):Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain,expires:parseInt(addonify_compare_ajax_object.cookie_expire)})}w(),a.on("click","button.addonify-cp-button, #addonify-compare-search-results .item-add",function(o){o.preventDefault();o=D(this).data("product_id");o&&(S(),e.includes(o)?l=!1:(D(this).attr("disabled",!0),l=!0,e.push(o),B(e),D(this).addClass("selected"),i.addClass("addonify-compare-hidden"),_.addClass("addonify-compare-hidden"),x(o.toString()),C(o.toString()),a.addClass("addonify-compare-dock-is-visible"),w()),g(),j(),m=m&&!(l=!0))}),a.on("click",".addonify-compare-dock-remove-item-btn",function(o){o.preventDefault();var a=D(this).data("product_id");if(a){l=!0,D('button.addonify-cp-button[data-product_id="'+a+'"]').removeClass("selected").removeAttr("disabled");for(var d=0;d<e.length;d++)e[d]==a&&e.splice(d,1);B(e),D('.addonify-compare-dock-components[data-product_id="'+a+'"]').remove(),g(),j(),w(),p&&(A(),l=!0,L())}}),a.on("click","#addonify-compare-dock-add-item",function(){a.removeClass("addonify-compare-dock-is-visible"),_.removeClass("addonify-compare-hidden"),i.removeClass("addonify-compare-hidden")}),a.on("click","#addonify-compare-search-close-button, #addonify-compare-search-modal-overlay",function(){a.addClass("addonify-compare-dock-is-visible"),_.addClass("addonify-compare-hidden"),S()}),a.on("keyup","#addonify-compare-search-query",function(){var a=D(this).val();clearTimeout(o),o=setTimeout(function(){var o;(o=a).length&&(c.html("").addClass("loading"),o={action:addonify_compare_ajax_object.action_search_items,query:o,nonce:addonify_compare_ajax_object.nonce},D.post(addonify_compare_ajax_object.ajax_url,o,function(o){c.removeClass("loading").html(o)}))},500)}),a.on("click","#addonify-compare-dock-compare-btn",function(){a.addClass("addonify-compare-modal-is-visible"),"page"==f?window.location.href=u:p?A():(m=m&&!(l=!0),L())}),a.on("click","#addonify-compare-close-button, #addonify-compare-modal-overlay",function(){A(),a.removeClass("addonify-compare-modal-is-visible")})})}(jQuery),document.addEventListener("DOMContentLoaded",function(){var o=document.getElementById("addonify-compare-modal-content");null!=o&&AddonifyPerfectScrollBar(o)});