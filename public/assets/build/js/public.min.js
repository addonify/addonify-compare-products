"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function AddonifyPerfectScrollBar(o){new PerfectScrollbar(o,{wheelSpeed:1,wheelPropagation:!0,minScrollbarLength:20,useBothWheelAxes:!0})}!function(k){k(document).ready(function(){var o,d,t=k("body"),e=k("#addonify-compare-dock-message"),a=k("#addonify-compare-search-modal"),n=k("#addonify-compare-search-results"),c=k("#addonify-compare-modal"),r=k("#addonify-compare-modal-content"),i=k("#addonify-compare-modal-overlay"),s=k("#addonify-compare-search-modal-overlay"),l=k(".addonify-dock-compare-button"),m=addonifyCompareProductsJSObject.localDataExpiresIn,p="addonify_compare_products_plugin",f=C().length;function u(){0===f?t.removeClass("addonify-compare-dock-is-visible"):t.addClass("addonify-compare-dock-is-visible")}function y(){1<f?l.show():l.hide()}function b(){f<2?(e.removeClass("addonify-compare-hidden"),k("#addonify-compare-dock-inner").removeClass("full")):(e.addClass("addonify-compare-hidden"),k("#addonify-compare-dock-inner").addClass("full"))}function h(){f<2?(k("#addonify-compare-products-notice").removeClass("addonify-compare-hidden"),k("#addonify-compare-products-table").hide()):k("#addonify-compare-products-notice").addClass("addonify-compare-hidden")}function v(){n.html(""),k("#addonify-compare-search-query").val(""),t.removeClass("addonify-compare-disable-scroll"),a.addClass("addonify-compare-hidden"),s.addClass("addonify-compare-hidden")}function C(){return g("product_ids")}function _(o){var d,e,a;d="product_ids","object"===_typeof(o=o)&&(o=JSON.stringify(o)),e=addonifyCompareProductsJSObject.thisSiteUrl,(a=new Date).setTime(a.getTime()+24*m*60*60*1e3),a=a.getTime(),localStorage.setItem(p+"_"+d+"_"+e,o),localStorage.setItem(p+"_"+d+"_deadline_"+e,a)}function g(o){var d,e,a=addonifyCompareProductsJSObject.thisSiteUrl,t=localStorage.getItem(p+"_"+o+"_deadline_"+a);if(null!==t){if((new Date).getTime()<parseInt(t))return null!==(d=function(o){var d;try{d=JSON.parse(o)}catch(o){return!1}return d}(localStorage.getItem(p+"_"+o+"_"+a)))&&"object"===_typeof(d)&&(e=new Array,0<(t=Object.keys(d)).length&&t.forEach(function(o){e[o]=d[o]}),e);localStorage.removeItem(p+"_"+o+"_"+a),localStorage.removeItem(p+"_"+o+"_deadline_"+a)}return[]}function S(o){var d,o=0<arguments.length&&void 0!==o?o:"";0<t.has("#addonify-compare-products-comparison-table-on-page").length&&((d=g("product_ids")).length<=1?(o=1==d.length?addonifyCompareProductsJSObject.messageOnOneProduct:addonifyCompareProductsJSObject.messageOnNoProducts,k("#addonify-compare-products-comparison-table-on-page").html('\n\t\t\t<div class="addonify-compare-alert info">\n\t\t\t\t<div class="addonify-compare-alert-content">\n\t\t\t\t\t<p>'+o+"</p>\n\t\t\t\t</div>\x3c!-- // addonify-compare-alert-content --\x3e\n\t\t\t</div>\x3c!-- // addonify-compare-modal-alert --\x3e\n\t\t\t")):""!==o&&k("#addonify-compare-products-comparison-table-on-page").html(o))}(d=g("product_ids"))instanceof Array&&0<d.length?k.ajax({url:addonifyCompareProductsJSObject.ajaxURL,type:"POST",data:{action:addonifyCompareProductsJSObject.actionInit,product_ids:JSON.stringify(d),nonce:addonifyCompareProductsJSObject.nonce},success:function(o){r.html(o.compareModalContent),k.each(o.html,function(o,d){k(o).replaceWith(d)}),d.forEach(function(o){k(".addonify-cp-button[data-product_id="+o+"]").addClass("selected")}),S(o.compareModalContent),b(),y(),0!=Number(f)?t.addClass("addonify-compare-dock-is-visible"):t.removeClass("addonify-compare-dock-is-visible")}}):S(),t.on("click",".addonify-cp-button, #addonify-compare-search-results .item-add",function(o){o.preventDefault();var d=k(this),e=d.data("product_id"),a=C();a instanceof Array&&-1<a.indexOf(e)?console.log("Product already exists in compare list."):(a.push(e),k.ajax({url:addonifyCompareProductsJSObject.ajaxURL,type:"POST",data:{action:addonifyCompareProductsJSObject.actionAddProduct,product_id:e,product_ids:JSON.stringify(a),nonce:addonifyCompareProductsJSObject.nonce},success:function(o){o.success&&(r.html(o.compareModalContent),_(a),f+=1,d.addClass("selected").attr("disabled","disabled"),d.hasClass("item-add")&&v(),k("#addonify-compare-dock-thumbnails").append(o.product_image),k('.addonify-compare-dock-thumbnail[data-product_id="'+e+'"]').append(o.product_image).removeClass("loading"),h(),u(),y(),b(),k(document).trigger("addonify_added_to_comparelist",[{productID:e}]))}}))}),t.on("click",".addonify-compare-dock-remove-item-btn, .addonify-remove-compare-products",function(o){o.preventDefault();var o=k(this),d=o.data("product_id"),e=C(),a=e.indexOf(d);-1===a?console.log("Product does not exist in compare list."):(e.splice(a,1),_(e),f-=1,k("#addonify-compare-products-table tbody ").find("td[data-product_id="+d+"]").remove(),o.hasClass("addonify-compare-table-remove-btn")&&(k('td[data-product_id="'+d+'"]').remove(),k('button.addonify-cp-button[data-product_id="'+d+'"]').removeClass("selected").removeAttr("disabled"),f<2&&(t.removeClass("addonify-compare-disable-scroll"),i.addClass("addonify-compare-hidden"),c.addClass("addonify-compare-hidden"))),o.hasClass("addonify-compare-docker-remove-button")&&(k('button.addonify-cp-button[data-product_id="'+d+'"]').removeClass("selected").removeAttr("disabled"),k('.addonify-compare-dock-components[data-product_id="'+d+'"]').remove()),k('.addonify-compare-dock-components[data-product_id="'+d+'"]')&&k('.addonify-compare-dock-components[data-product_id="'+d+'"]').remove(),h(),u(),y(),b(),S(),k(document).trigger("addonify_removed_from_comparelist",[{productID:d}]))}),t.on("click","#addonify-compare-dock-compare-btn",function(o){o.preventDefault(),t.addClass("addonify-compare-disable-scroll"),i.removeClass("addonify-compare-hidden"),t.removeClass("addonify-compare-dock-is-visible"),c.removeClass("addonify-compare-hidden"),r.addClass("loading")}),t.on("click","#addonify-compare-dock-add-item",function(){t.addClass("addonify-compare-disable-scroll"),t.removeClass("addonify-compare-dock-is-visible"),s.removeClass("addonify-compare-hidden"),a.removeClass("addonify-compare-hidden"),k("#addonify-compare-search-query").focus()}),t.on("click","#addonify-compare-search-close-button, #addonify-compare-search-modal-overlay",function(){t.removeClass("addonify-compare-disable-scroll"),t.addClass("addonify-compare-dock-is-visible"),v()}),t.on("keyup","#addonify-compare-search-query",function(){var e=k(this).val();clearTimeout(o),o=setTimeout(function(){var o,d;(o=e).length&&(k("#addonify-compare-search-results").html("").addClass("loading"),d=C(),o={action:addonifyCompareProductsJSObject.actionSearchProducts,query:o,nonce:addonifyCompareProductsJSObject.nonce,product_ids:JSON.stringify(d)},k.post(addonifyCompareProductsJSObject.ajaxURL,o,function(o){k("#addonify-compare-search-results").removeClass("loading").html(o)}))},500)}),t.on("click","#addonify-compare-close-button, #addonify-compare-modal-overlay",function(){t.removeClass("addonify-compare-disable-scroll"),i.addClass("addonify-compare-hidden"),u(),c.addClass("addonify-compare-hidden"),t.removeClass("addonify-compare-modal-is-visible")})})}(jQuery),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".addonify-compare-scrollbar").forEach(function(o){null!=o&&AddonifyPerfectScrollBar(o)})});