!function(A){"use strict";A(document).ready(function(){var o,a=A("body"),e=[],d=A("#addonify-footer-thumbnails"),n=A("#addonify-compare-footer-message"),i=A("#addonify-compare-search-modal"),t=A("#addonify-compare-search-results"),c=A("#addonify-compare-modal"),r=A("#addonify-compare-modal-content"),s=A("#addonify-footer-compare-btn"),f=!1,l=!1,p=!0,m=addonify_compare_ajax_object.display_type,u=addonify_compare_ajax_object.comparision_page_url,_=A("#addonify-compare-modal-overlay"),y=A("#addonify-compare-search-modal-overlay"),h=(A("#addonify-footer-thumbnails").sortable({stop:function(){e=[],d.find(".addonify-footer-components").each(function(){e.push(A(this).data("product_id"))}),f=!0,I(e),l&&(D(),f=!0,q())}}).disableSelection(),A("#addonify-compare-products-footer-bar a, button.addonify-cp-button").click(function(o){o.preventDefault()}),"addonify-overlay-btn-wrapper"),b="addonify-overlay-btn",v=A("."+h),j=A(".addonify-overlay-buttons"),j=(v.length?j.each(function(){var o=A("button."+b,this).clone();A("button."+b,this).remove(),A("."+h,this).append(o)}):(j.each(function(){A("button."+b,this).wrapAll('<div class=" '+h+' " />')}),v=A("img.attachment-woocommerce_thumbnail").height(),A("."+h).css("height",v+"px"),A("."+h).hover(function(){A(this).css("opacity",1)},function(){A(this).css("opacity",0)})),Cookies.get("addonify_compare_product_selected_product_ids"));j&&(e=A.map(j.split(","),function(o){return parseInt(o)})),C(),e.length&&((j=v=e.join(",")).split(",").forEach(function(o){A('button.addonify-cp-button[data-product_id="'+o+'"]').addClass("selected").attr("disabled",!0)}),k(v),x(v),g());function C(){1<e.length?s.fadeIn():s.fadeOut()}function g(){e.length?a.addClass("addonify-compare-footer-is-visible"):a.removeClass("addonify-compare-footer-is-visible")}function x(o){o.length&&(o={action:addonify_compare_ajax_object.action_get_thumbnails,ids:o},A.getJSON(addonify_compare_ajax_object.ajax_url,o,function(o){A.each(o,function(o,a){A('.addonify-footer-thumbnail[data-product_id="'+o+'"]').append('<img src="'+a+'">').removeClass("loading")})}))}function k(o){var o=o.split(","),a="";o.forEach(function(o){a+='<div class="addonify-footer-components" data-product_id="'+o+'"><div class="sortable addonify-footer-thumbnail loading" data-product_id="'+o+'"><span class="addonify-footer-remove addonify-footer-btn" data-product_id="'+o+'"></span></div></div>'}),d.append(a)}function w(){e.length<2?n.removeClass("addonify-compare-hidden"):n.addClass("addonify-compare-hidden")}function S(){i.addClass("addonify-compare-hidden"),t.html(""),A("#addonify-compare-search-query").val("")}function q(){var o;_.removeClass("addonify-compare-hidden"),a.removeClass("addonify-compare-footer-is-visible"),f&&r.html(""),l=!0,c.removeClass("addonify-compare-hidden"),r.addClass("loading"),(o=e.join(","))&&f&&(o={action:addonify_compare_ajax_object.action_get_compare_contents},A.get(addonify_compare_ajax_object.ajax_url,o,function(o){r.removeClass("loading").html(o)}))}function D(){_.addClass("addonify-compare-hidden"),a.addClass("addonify-compare-footer-is-visible"),c.addClass("addonify-compare-hidden"),f=l=!1}function I(o){o=o.join(","),"browser"==addonify_compare_ajax_object.cookie_expire?Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain}):Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain,expires:parseInt(addonify_compare_ajax_object.cookie_expire)})}w(),a.on("click","button.addonify-cp-button, #addonify-compare-search-results .item-add",function(o){o.preventDefault();o=A(this).data("product_id");o&&(S(),e.includes(o)?f=!1:(A(this).attr("disabled",!0),f=!0,e.push(o),I(e),A(this).addClass("selected"),i.addClass("addonify-compare-hidden"),k(o.toString()),x(o.toString()),a.addClass("addonify-compare-footer-is-visible"),w()),g(),C(),p=p&&!(f=!0))}),a.on("click",".addonify-footer-remove",function(o){o.preventDefault();var a=A(this).data("product_id");if(a){f=!0,A('button.addonify-cp-button[data-product_id="'+a+'"]').removeClass("selected").removeAttr("disabled");for(var d=0;d<e.length;d++)e[d]==a&&e.splice(d,1);I(e),A('.addonify-footer-components[data-product_id="'+a+'"]').remove(),g(),C(),w(),l&&(D(),f=!0,q())}}),a.on("click","#addonify-footer-add",function(){a.removeClass("addonify-compare-footer-is-visible"),y.removeClass("addonify-compare-hidden"),i.removeClass("addonify-compare-hidden")}),a.on("click","#addonify-compare-search-close-button, #addonify-compare-search-modal-overlay",function(){a.addClass("addonify-compare-footer-is-visible"),y.addClass("addonify-compare-hidden"),S()}),a.on("keyup","#addonify-compare-search-query",function(){var a=A(this).val();clearTimeout(o),o=setTimeout(function(){var o;(o=a).length&&(t.html("").addClass("loading"),o={action:addonify_compare_ajax_object.action_search_items,query:o,nonce:addonify_compare_ajax_object.nonce},A.post(addonify_compare_ajax_object.ajax_url,o,function(o){t.removeClass("loading").html(o)}))},500)}),a.on("click","#addonify-footer-compare-btn",function(){"page"==m?window.location.href=u:l?D():(p=p&&!(f=!0),q())}),a.on("click","#addonify-compare-close-button, #addonify-compare-modal-overlay",function(){D()})})}(jQuery);