!function(j){"use strict";j(document).ready(function(){var a,n=j("body"),t=[],e=j("#addonify-footer-thumbnails"),o=j("#addonify-compare-footer-message"),d=j("#addonify-compare-search-modal"),i=j("#addonify-compare-search-results"),c=j("#addonify-compare-modal"),s=j("#addonify-compare-modal-content"),r=!1,f=!1,u=!0,l=addonify_compare_ajax_object.display_type,p=addonify_compare_ajax_object.comparision_page_url;function m(o){var a;o.length&&(a={action:addonify_compare_ajax_object.action_get_thumbnails,ids:o},j.getJSON(addonify_compare_ajax_object.ajax_url,a,function(o){j.each(o,function(o,a){j('.addonify-footer-thumbnail[data-product_id="'+o+'"]').append('<img src="'+a+'">').removeClass("loading")})}))}function h(o){var a=o.split(","),n="";a.forEach(function(o){n+='<div class="addonify-footer-components" data-product_id="'+o+'"><div class="sortable addonify-footer-thumbnail loading" data-product_id="'+o+'"><span class="addonify-footer-remove" data-product_id="'+o+'"></span></div></div>'}),e.append(n)}function _(){t.length<2?o.removeClass("hidden"):o.addClass("hidden")}function y(){d.addClass("hidden"),i.html(""),j("#addonify-compare-search-query").val("")}function b(){var o;r&&s.html(""),f=!0,c.removeClass("hidden"),s.addClass("loading"),t.join(",")&&r&&(o={action:addonify_compare_ajax_object.action_get_compare_contents},j.get(addonify_compare_ajax_object.ajax_url,o,function(o){s.removeClass("loading").html(o)}))}function v(){c.addClass("hidden"),r=f=!1}function g(o){"browser"==addonify_compare_ajax_object.cookie_expire?Cookies.set("addonify_selected_product_ids",o):Cookies.set("addonify_selected_product_ids",o,{expires:parseInt(addonify_compare_ajax_object.cookie_expire)})}j("#addonify-footer-thumbnails").sortable({stop:function(){t=[],e.find(".addonify-footer-components").each(function(){t.push(j(this).data("product_id"))}),r=!0,g(t)}}).disableSelection(),j("#addonify-compare-products-footer-bar a, button.addonify-cp-button").click(function(o){o.preventDefault()}),function(){{var o;(function(){var a="addonify-overlay-btn-wrapper",n="addonify-overlay-btn",o=j("."+a),t=j(".addonify-overlay-buttons");o.length?t.each(function(){var o=j("button."+n,this).clone();j("button."+n,this).remove(),j("."+a,this).append(o)}):t.each(function(){j("button."+n,this).wrapAll('<div class=" '+a+' " />')});var e=j("img.attachment-woocommerce_thumbnail").height(),d=(e-j("."+a).height())/2;j("."+a).css("height",e+"px").css("padding-top",d+"px"),j("."+a).hover(function(){j(this).css("opacity",1)},function(){j(this).css("opacity",0)})})(),function(){var o=Cookies.get("addonify_selected_product_ids");if(!o)return;t=j.map(o.split(","),function(o){return parseInt(o)})}(),t.length&&(function(o){o.split(",").forEach(function(o){j('button.addonify-cp-button[data-product_id="'+o+'"]').addClass("selected")})}(o=t.join(",")),h(o),m(o),n.addClass("addonify-compare-footer-is-visible"))}_()}(),n.on("click","button.addonify-cp-button, #addonify-compare-search-results .item-add",function(){var o=j(this).data("product_id");o&&(y(),t.includes(o)?r=!1:(r=!0,t.push(o),g(t),j(this).addClass("selected"),d.addClass("hidden"),("popup"==l||t.length<2)&&(h(o.toString()),m(o.toString()),n.addClass("addonify-compare-footer-is-visible"),_())),u=u&&!(r=!0),"page"==l&&1<t.length?window.location.href=p:j(this).hasClass("addonify-cp-button")?1<t.length&&b():1<t.length&&(v(),r=!0,b()))}),n.on("click","span.addonify-footer-remove",function(){var o=j(this).data("product_id");if(o){r=!0,j('button.addonify-cp-button[data-product_id="'+o+'"]').removeClass("selected");for(var a=0;a<t.length;a++)t[a]==o&&t.splice(a,1);g(t),j(this).parents(".addonify-footer-components").remove(),_(),f&&(v(),b())}}),n.on("click","#addonify-footer-add",function(){d.removeClass("hidden")}),n.on("click","#addonify-compare-search-close-button",function(){y()}),n.on("keyup","#addonify-compare-search-query",function(){var o=j(this).val();clearTimeout(a),a=setTimeout(function(){!function(o){if(!o.length)return;i.html("").addClass("loading");var a={action:addonify_compare_ajax_object.action_search_items,query:o};j.get(addonify_compare_ajax_object.ajax_url,a,function(o){i.removeClass("loading").html(o)})}(o)},500)}),n.on("click","#addonify-footer-compare-btn",function(){"page"!=l?f?v():(u=u&&!(r=!0),b()):window.location.href=p}),n.on("click","#addonify-compare-close-button",function(){v()})})}(jQuery),function(o){"use strict";o(document).ready(function(){o("body").on("click",".addonify-qvm-button",function(){})})}(jQuery);