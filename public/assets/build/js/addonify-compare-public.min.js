!function(x){"use strict";x(document).ready(function(){var o,a=x("body"),d=[],n=x("#addonify-footer-thumbnails"),t=x("#addonify-compare-footer-message"),e=x("#addonify-compare-search-modal"),i=x("#addonify-compare-search-results"),c=x("#addonify-compare-modal"),r=x("#addonify-compare-modal-content"),s=!1,f=!1,l=!0,u=addonify_compare_ajax_object.display_type,p=addonify_compare_ajax_object.comparision_page_url,_=(x("#addonify-footer-thumbnails").sortable({stop:function(){d=[],n.find(".addonify-footer-components").each(function(){d.push(x(this).data("product_id"))}),s=!0,C(d)}}).disableSelection(),x("#addonify-compare-products-footer-bar a, button.addonify-cp-button").click(function(o){o.preventDefault()}),Cookies.get("addonify_selected_product_ids"));{var m;(d=_?x.map(_.split(","),function(o){return parseInt(o)}):d).length&&(m=_=d.join(","),_.split(",").forEach(function(o){x('button.addonify-cp-button[data-product_id="'+o+'"]').addClass("selected")}),h(_),y(_),a.addClass("addonify-compare-footer-is-visible"))}function y(o){o.length&&(o={action:addonify_compare_ajax_object.action_get_thumbnails,ids:o},x.getJSON(addonify_compare_ajax_object.ajax_url,o,function(o){x.each(o,function(o,a){x('.addonify-footer-thumbnail[data-product_id="'+o+'"]').append('<img src="'+a+'">').removeClass("loading")})}))}function h(o){var o=o.split(","),a="";o.forEach(function(o){a+='<div class="addonify-footer-components" data-product_id="'+o+'"><div class="sortable addonify-footer-thumbnail loading" data-product_id="'+o+'"><span class="addonify-footer-remove" data-product_id="'+o+'"></span></div></div>'}),n.append(a)}function b(){1<d.length?t.fadeOut():t.fadeIn()}function v(){e.addClass("hidden"),i.html(""),x("#addonify-compare-search-query").val("")}function j(){var o;s&&r.html(""),f=!0,c.removeClass("hidden"),r.addClass("loading"),(o=d.join(","))&&s&&(o={action:addonify_compare_ajax_object.action_get_compare_contents,ids:o},x.get(addonify_compare_ajax_object.ajax_url,o,function(o){r.removeClass("loading").html(o)}))}function g(){c.addClass("hidden"),f=!1}function C(o){"browser"==addonify_compare_ajax_object.cookie_expire?Cookies.set("addonify_selected_product_ids",o):Cookies.set("addonify_selected_product_ids",o,{expires:parseInt(addonify_compare_ajax_object.cookie_expire)})}b(),a.on("click","button.addonify-cp-button, #addonify-compare-search-results .item-add",function(){var o=x(this).data("product_id");o&&(v(),d.includes(o)?s=!1:(s=!0,d.push(o),C(d),x(this).addClass("selected"),h(o.toString()),y(o.toString()),e.addClass("hidden"),a.addClass("addonify-compare-footer-is-visible"),b()),l=l&&!(s=!0),"page"==u?window.location.href=p:x(this).hasClass("addonify-cp-button")?1<d.length&&j():(g(),j()))}),a.on("click","span.addonify-footer-remove",function(){var o=x(this).data("product_id");if(o){s=!0,x('button.addonify-cp-button[data-product_id="'+o+'"]').removeClass("selected");for(var a=0;a<d.length;a++)d[a]==o&&d.splice(a,1);C(d),x(this).parents(".addonify-footer-components").remove(),b(),f&&(g(),j())}}),a.on("click","#addonify-footer-add",function(){e.removeClass("hidden")}),a.on("click","#addonify-compare-search-close-button",function(){v()}),a.on("keyup","#addonify-compare-search-query",function(){var a=x(this).val();clearTimeout(o),o=setTimeout(function(){var o;(o=a).length&&(i.html("").addClass("loading"),o={action:addonify_compare_ajax_object.action_search_items,query:o},x.get(addonify_compare_ajax_object.ajax_url,o,function(o){i.removeClass("loading").html(o)}))},500)}),a.on("click","#addonify-footer-compare-btn",function(){"page"==u?window.location.href=p:f?g():(l=l&&!(s=!0),j(),s=!1)}),a.on("click","#addonify-compare-close-button",function(){g()})})}(jQuery),function(o){"use strict";o(document).ready(function(){o("body").on("click",".addonify-qvm-button",function(){})})}(jQuery);