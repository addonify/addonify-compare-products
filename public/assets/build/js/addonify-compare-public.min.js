!function(k){"use strict";k(document).ready(function(){var a,t=k("body"),n=[],e=k("#addonify-footer-thumbnails"),o=k("#addonify-compare-footer-message"),d=k("#addonify-compare-search-modal"),i=k("#addonify-compare-search-results"),c=k("#addonify-compare-modal"),r=k("#addonify-compare-modal-content"),s=k("#addonify-footer-compare-btn"),f=!1,u=!1,l=!0,p=addonify_compare_ajax_object.display_type,_=addonify_compare_ajax_object.comparision_page_url;function m(){1<n.length?s.fadeIn():s.fadeOut()}function y(){n.length?t.addClass("addonify-compare-footer-is-visible"):t.removeClass("addonify-compare-footer-is-visible")}function h(o){var a;o.length&&(a={action:addonify_compare_ajax_object.action_get_thumbnails,ids:o},k.getJSON(addonify_compare_ajax_object.ajax_url,a,function(o){k.each(o,function(o,a){k('.addonify-footer-thumbnail[data-product_id="'+o+'"]').append('<img src="'+a+'">').removeClass("loading")})}))}function b(o){var a=o.split(","),t="";a.forEach(function(o){t+='<div class="addonify-footer-components" data-product_id="'+o+'"><div class="sortable addonify-footer-thumbnail loading" data-product_id="'+o+'"><span class="addonify-footer-remove addonify-footer-btn" data-product_id="'+o+'"></span></div></div>'}),e.append(t)}function v(){n.length<2?o.removeClass("hidden"):o.addClass("hidden")}function j(){d.addClass("hidden"),i.html(""),k("#addonify-compare-search-query").val("")}function g(){var o;f&&r.html(""),u=!0,c.removeClass("hidden"),r.addClass("loading"),n.join(",")&&f&&(o={action:addonify_compare_ajax_object.action_get_compare_contents},k.get(addonify_compare_ajax_object.ajax_url,o,function(o){r.removeClass("loading").html(o)}))}function x(){c.addClass("hidden"),f=u=!1}function C(o){o=o.join(","),"browser"==addonify_compare_ajax_object.cookie_expire?Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain}):Cookies.set("addonify_compare_product_selected_product_ids",o,{path:addonify_compare_ajax_object.cookie_path,domain:addonify_compare_ajax_object.cookie_domain,expires:parseInt(addonify_compare_ajax_object.cookie_expire)})}k("#addonify-footer-thumbnails").sortable({stop:function(){n=[],e.find(".addonify-footer-components").each(function(){n.push(k(this).data("product_id"))}),f=!0,C(n),u&&(x(),f=!0,g())}}).disableSelection(),k("#addonify-compare-products-footer-bar a, button.addonify-cp-button").click(function(o){o.preventDefault()}),function(){{var o;(function(){var a="addonify-overlay-btn-wrapper",t="addonify-overlay-btn",o=k("."+a),n=k(".addonify-overlay-buttons");{var e;o.length?n.each(function(){var o=k("button."+t,this).clone();k("button."+t,this).remove(),k("."+a,this).append(o)}):(n.each(function(){k("button."+t,this).wrapAll('<div class=" '+a+' " />')}),e=k("img.attachment-woocommerce_thumbnail").height(),k("."+a).css("height",e+"px"),k("."+a).hover(function(){k(this).css("opacity",1)},function(){k(this).css("opacity",0)}))}})(),function(){var o=Cookies.get("addonify_compare_product_selected_product_ids");if(!o)return;n=k.map(o.split(","),function(o){return parseInt(o)})}(),m(),n.length&&(function(o){o.split(",").forEach(function(o){k('button.addonify-cp-button[data-product_id="'+o+'"]').addClass("selected").attr("disabled",!0)})}(o=n.join(",")),b(o),h(o),y())}v()}(),t.on("click","button.addonify-cp-button, #addonify-compare-search-results .item-add",function(o){o.preventDefault();var a=k(this).data("product_id");a&&(j(),n.includes(a)?f=!1:(k(this).attr("disabled",!0),f=!0,n.push(a),C(n),k(this).addClass("selected"),d.addClass("hidden"),b(a.toString()),h(a.toString()),t.addClass("addonify-compare-footer-is-visible"),v()),y(),m(),l=l&&!(f=!0))}),t.on("click",".addonify-footer-remove",function(){var o=k(this).data("product_id");if(o){f=!0,k('button.addonify-cp-button[data-product_id="'+o+'"]').removeClass("selected").removeAttr("disabled");for(var a=0;a<n.length;a++)n[a]==o&&n.splice(a,1);C(n),k('.addonify-footer-components[data-product_id="'+o+'"]').remove(),y(),m(),v(),u&&(x(),f=!0,g())}}),t.on("click","#addonify-footer-add",function(){d.removeClass("hidden")}),t.on("click","#addonify-compare-search-close-button",function(){j()}),t.on("keyup","#addonify-compare-search-query",function(){var o=k(this).val();clearTimeout(a),a=setTimeout(function(){!function(o){if(!o.length)return;i.html("").addClass("loading");var a={action:addonify_compare_ajax_object.action_search_items,query:o};k.get(addonify_compare_ajax_object.ajax_url,a,function(o){i.removeClass("loading").html(o)})}(o)},500)}),t.on("click","#addonify-footer-compare-btn",function(){"page"!=p?u?x():(l=l&&!(f=!0),g()):window.location.href=_}),t.on("click","#addonify-compare-close-button",function(){x()})})}(jQuery),function(o){"use strict";o(document).ready(function(){o("body").on("click",".addonify-qvm-button",function(){})})}(jQuery);